<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Utente</title>
    <!-- base:css -->
    <link rel="stylesheet" href="/static/vendors/typicons.font/font/typicons.css">
    <link rel="stylesheet" href="/static/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/static/css/vertical-layout-light/style.css">
    <link rel="stylesheet" href="/static/css/log.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="/static/images/enia.png" />
    <style>
        p {
            color: red;
        }
    </style>
</head>

<body>
    <div class="container-scroller">
        <!-- partial:partials/_navbar.html -->
        <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
            <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
                <a class="navbar-brand brand-logo" href="http://localhost:5000/index.html"><img
                        src="/static/images/enia.png" alt="logo"></a>
                <a class="navbar-brand brand-logo-mini" href="http://localhost:5000/index.html"><img
                        src="/static/images/enia.png" alt="logo"></a>
                <button class="navbar-toggler navbar-toggler align-self-center d-none d-lg-flex" type="button"
                    data-toggle="minimize">
                    <span class="typcn typcn-th-menu"></span>
                </button>
            </div>
            <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
                <ul class="navbar-nav mr-lg-2">
                    <li class="nav-item  d-none d-lg-flex">
                        <a class="nav-link active">
                            Utente
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav navbar-nav-right">
                    <li class="nav-item dropdown  d-flex">
                        <a class="nav-link count-indicator dropdown-toggle d-flex align-items-center justify-content-center"
                            id="notificationDropdown" data-toggle="dropdown">
                            <i class="typcn typcn-bell mr-0"></i>
                            <!--TODO farlo variabile con l'implementazione delle notifiche-->
                            <span class="count bg-danger">2</span>
                            <!--Numero notifiche-->
                        </a>
                        <!--contenuto dropdown notifiche-->
                        <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list"
                            aria-labelledby="notificationDropdown">
                            <p class="mb-0 font-weight-normal float-left dropdown-header">Notifications</p>
                            <a class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-success">
                                        <i class="typcn typcn-info-large mx-0"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <h6 class="preview-subject font-weight-normal">Application Error</h6>
                                    <p class="font-weight-light small-text mb-0">
                                        Just now
                                    </p>
                                </div>
                            </a>
                            <a class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-warning">
                                        <i class="typcn typcn-cog mx-0"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <h6 class="preview-subject font-weight-normal">Settings</h6>
                                    <p class="font-weight-light small-text mb-0">
                                        Private message
                                    </p>
                                </div>
                            </a>
                            <a class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-info">
                                        <i class="typcn typcn-user-outline mx-0"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <h6 class="preview-subject font-weight-normal">New user registration</h6>
                                    <p class="font-weight-light small-text mb-0">
                                        2 days ago
                                    </p>
                                </div>
                            </a>
                        </div>
                    </li>
                    <li class="nav-item nav-profile dropdown">
                        <a class="nav-link dropdown-toggle  pl-0 pr-0" data-toggle="dropdown" id="profileDropdown">
                            <i class="typcn typcn-user-outline mr-0"  style ="vertical-align: unset !important;"></i>
                            <span class="nav-profile-name" >User</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right navbar-dropdown"
                            aria-labelledby="profileDropdown">
                            <a class="dropdown-item" href="/user">
                                <i class="typcn typcn-cog text-primary"></i>
                                Settings
                            </a>
                            <a class="dropdown-item" href="/logout">
                                <i class="typcn typcn-power text-primary"></i>
                                Logout
                            </a>
                        </div>
                    </li>
                </ul>
                <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
                    data-toggle="offcanvas">
                    <span class="typcn typcn-th-menu"></span>
                </button>
            </div>
        </nav>
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:partials/_settings-panel.html -->
            <!-- partial -->
            <!-- partial:partials/_sidebar.html -->
            <nav class="sidebar sidebar-offcanvas" id="sidebar">
                <ul class="nav">
                    <li class="nav-item">
                        <div class="d-flex sidebar-profile">
                            <div class="sidebar-profile-image">
                            </div>
                            <div class="sidebar-profile-name">
                                <p class="sidebar-name">
                                    {{current_user.nome + " " + current_user.cognome}}
                                </p>
                                <p class="sidebar-designation">
                                    Welcome
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/visualizzaTerreni">
                            <i class="typcn typcn-map menu-icon"></i>
                            <span class="menu-title">Terreni</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/user" aria-expanded="false" aria-controls="auth">
                            <i class="typcn typcn-user menu-icon"></i>
                            <span class="menu-title">User Pages</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="" aria-expanded="false" aria-controls="error">
                            <i class="typcn typcn-bell menu-icon"></i>
                            <span class="menu-title">Notifiche</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="">
                            <i class="typcn typcn-document-text menu-icon"></i>
                            <span class="menu-title">Documentation</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <!-- partial -->
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper d-flex align-items-center auth px-0"
                    style="background-image: url('/static/images/login.jpg'); background-repeat: no-repeat; background-size: cover;">
                    <div class="row w-100 mx-0">
                        <div class="col-lg-4 mx-auto">
                            <div class="text-left py-5 px-4 px-sm-5" id="principale">
                                <div class="card" id="view">
                                    <div class="card-body">
                                        <h2 class="card-title">Utente</h2>
                                        <div class="d-flex mb-4">
                                            Nome: {{current_user.nome}}
                                        </div>
                                        <div class="d-flex mb-4">
                                            Cognome: {{current_user.cognome}}
                                        </div>
                                        <div class="d-flex mb-4">
                                            Email: {{current_user.email}}
                                        </div>
                                        <div class="d-flex mb-4">
                                            Ruolo: {{current_user.ruolo}}
                                        </div>
                                        <div class="d-flex mb-4">
                                            Data di Nascita: {{current_user.dataNascita}}
                                        </div>
                                        <div class="d-flex mb-4">
                                            Indirizzo: {{current_user.indirizzo}}
                                        </div>
                                        {%if current_user.ruolo != "farmer"%}

                                        <div id="userview">
                                            <div class="d-flex mb-4">
                                                Codice:{{current_user.codice}}
                                            </div>
                                            <input class="btn btn-primary" type="button" value="Modifica"
                                                onclick="ModUser()">
                                        </div>
                                        {%else%}

                                        <div id="farmerview">
                                            <div class="d-flex mb-4">
                                                PartitaIVA: {{current_user.partitaIVA}}
                                            </div>
                                            <input class="btn btn-primary" type="button" value="Modifica"
                                                onclick="ModUser()">
                                            <h2 class="card-title mt-4">Licenza</h2>
                                            <div class="d-flex mb-4">
                                                Tipo: {{session["licenza"].tipo}}
                                            </div>
                                            <div class="d-flex mb-4">
                                                Costo: {{session["licenza"].costo}}
                                            </div>
                                            <div class="d-flex mb-4">
                                                Data attivazione: {{session["licenza"].data_attivazione}}
                                            </div>
                                            <div class="d-flex mb-4">
                                                Data scadenza: {{session["licenza"].data_scadenza}}
                                            </div>
                                            <input class="btn btn-primary" type="button" value="Modifica"
                                                onclick="ModLicenza()">

                                            <h2 class="card-title mt-4">Metodo di pagamento</h2>
                                            <div class="d-flex mb-4">
                                                Numero carta: {{session["metodo"].num_carta}}
                                            </div>
                                            <div class="d-flex mb-4">
                                                Titolare: {{session["metodo"].titolare}}
                                            </div>
                                            <div class="d-flex mb-4">
                                                Scadenza: {{session["metodo"].scadenza}}
                                            </div>
                                            <div class="d-flex mb-4">
                                                CVV: {{session["metodo"].cvv}}
                                            </div>
                                            <input class="btn btn-primary d-flex mb-4" type="button" value="Modifica"
                                                onclick="ModMetodo()">
                                            <h2 class="card-title"> Visualizzazione Azienda</h2>
                                            <input type="button" class="btn btn-primary" value="Visualizza"
                                                onclick="Visualizza()">
                                        </div>
                                        {%endif%}
                                    </div>
                                </div>

                                <div class="card" id="usermod" style="display: none;">
                                    <div class="card-body">
                                        <form method="post" action="/user" id="userform">
                                            <div class="form-group" align-items-center>
                                                <h2 class="card-title"> Modifica Utente</h2>
                                                <input type="hidden" name="type" value="user">
                                                <label for="exampleInputName1">Nome</label>
                                                <input type="text" name="nome" id = "nome" class="form-control"
                                                    value="{{current_user.nome}}" placeholder="Nome">
                                                    <p id="nomeerr"></p>
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleInputName2">Cognome</label>
                                                <input type="text" name="cognome" id = "cognome" class="form-control"
                                                    value="{{current_user.cognome}}" placeholder="Cognome">
                                                    <p id="cognomeerr"></p>
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleInputEmail3">Email</label>
                                                <input type="email" name="email" id = "email" class="form-control"
                                                    value="{{current_user.email}}" placeholder="Email">
                                                    <p id="emailerr"></p>
                                            </div>
                                            <div class="form-group">
                                                <label>Nuova Password</label>
                                                <input type="password" name="password" id="password" class="form-control"
                                                    placeholder="Password">
                                                <p id="passerr"></p>
                                            </div>
                                            <div class="form-group">
                                                <label>Conferma Password</label>
                                                <input type="password" name="confermaPassword" id="confermaPassword"
                                                    class="form-control" placeholder="Conferma Password">
                                                <p id="conferr"></p>
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleInputEmail3">Data di nascita</label>
                                                <input type="date" name="dataNascita" id = "dataNascita" class="form-control"
                                                    value="{{current_user.dataNascita}}" placeholder="Data di nascita">
                                                <p id="dataerr"></p>
                                                </div>
                                            <div class="form-group">
                                                <label for="exampleInputEmail3">Indirizzo</label>
                                                <input type="text" name="indirizzo" id = "indirizzo" class="form-control"
                                                    value="{{current_user.indirizzo}}" placeholder="Indirizzo">
                                                <p id="indirizzoerr"></p>
                                                    {%if current_user.ruolo == "farmer"%}
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleInputEmail3">PartitaIVA</label>
                                                <input type="text" name="partitaIVA" id = "partitaiva" class="form-control"
                                                    value="{{current_user.partitaIVA}}" placeholder="PartitaIVA">
                                                    <p id="partitaivaerr"></p>
                                                    {%endif%}
                                            </div>
                                            <input type="button" class="btn btn-primary" value="Modifica" onclick="CheckUser()">
                                            <input type="button" class="btn btn-primary" value="Annulla" onclick="Annulla()">
                                        </form>
                                    </div>
                                </div>
                                {%if current_user.ruolo == "farmer"%}
                                <div class="card" id="licenzamod" style="display: none;">
                                    <div class="card-body">
                                        <form method="post" action="/user">
                                            <h2 class="card-title"> Modifica Licenza</h2><br>
                                            <input type="hidden" name="type" value="licenza">
                                            {%if session['licenza'].tipo == "licenza standard"%}
                                            <input type="radio" id="standard" name="licenza" value="standard" checked>
                                            {%else%}
                                            <input type="radio" id="standard" name="licenza" value="standard">
                                            {%endif%}
                                            <label for="standard">Standard</label>
                                            <br>
                                            {%if session['licenza'].tipo == "licenza premium"%}
                                            <input type="radio" id="premium" name="licenza" value="premium" checked>
                                            {%else%}
                                            <input type="radio" id="premium" name="licenza" value="premium">
                                            {%endif%}
                                            <label for="premium">Premium</label>
                                            <br>
                                            <input type="button" class="btn btn-primary" value="Modifica">
                                            <input type="button" class="btn btn-primary" value="Annulla" onclick="Annulla()">
                                        </form>
                                    </div>
                                </div>
                                {%endif%}

                                {%if current_user.ruolo == "farmer"%}
                                <div class="card" id="metodomod" style="display: none;">
                                    <div class="card-body">
                                        <form method="post" action="/user" id="metodoform">
                                            <h2 class="card-title"> Modifica metodo di pagamento</h2><br>
                                            <input type="hidden" name="type" value="metodo">
                                            <div class="form-group">
                                                <label for="exampleInputName2">Numero carta</label>
                                                <input type="text" name="num_carta" id = "num_carta" class="form-control"
                                                    value="{{session['metodo'].num_carta}}" placeholder="Numero carta">
                                                    <p id="numerocartaerr"></p>
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleInputName2">Titolare</label>
                                                <input type="text" name="titolare" id = "titolare" class="form-control"
                                                    value="{{session['metodo'].titolare}}" placeholder=" Titolare">
                                                    <p id="titolareerr"></p>
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleInputName2">Scadenza</label>
                                                <input type="text" name="scadenza" id = "scadenza" class="form-control"
                                                    value="{{session['metodo'].scadenza}}" placeholder=" Scadenza">
                                                    <p id="scadenzaerr"></p>
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleInputName2">CVV</label>
                                                <input type="text" name="cvv" id = "cvv" class="form-control"
                                                    value="{{session['metodo'].cvv}}" placeholder=" CVV">
                                                    <p id="cvverr"></p>
                                            </div>
                                            <input type="button" class="btn btn-primary" value="Modifica" onclick="CheckMetodo()">
                                            <input type="button" class="btn btn-primary" value="Annulla" onclick="Annulla()">
                                        </form>
                                    </div>
                                </div>
                                {%endif%}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</body>
<!-- base:js -->
<script src="/static/vendors/js/vendor.bundle.base.js"></script>
<!-- endinject -->
<!-- Plugin js for this page-->
<!-- End plugin js for this page-->
<!-- inject:js -->
<script src="/static/js/off-canvas.js"></script>
<script src="/static/js/hoverable-collapse.js"></script>
<script src="/static/js/template.js"></script>
<script src="/static/js/settings.js"></script>
<script src="/static/js/todolist.js"></script>
<!-- endinject -->
<!-- plugin js for this page -->
<script src="/static/vendors/progressbar.js/progressbar.min.js"></script>
<script src="/static/vendors/chart.js/Chart.min.js"></script>
<!-- End plugin js for this page -->
<!-- Custom js for this page-->
<script src="/static/javascript/user.js"></script>
<!-- End custom js for this page-->

</html>